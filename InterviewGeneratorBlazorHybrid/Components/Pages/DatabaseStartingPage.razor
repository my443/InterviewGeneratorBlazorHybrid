@page "/database"
@inject NavigationManager NavigationManager

<div class="page-center">
    <div class="button-group" role="group" aria-label="Database options">
        <button class="btn primary" >Add New Database</button>
        <button class="btn primary" @onclick="SelectDifferentDatabase">Select A Current Database</button>
        <button class="btn primary" >Create Sample Database</button>
    </div>
</div>
<h3>DatabaseStartingPage</h3>

@code {
    private bool _isPicking;

    private async Task SelectDifferentDatabase()
    {
        if (_isPicking)
            return;

        _isPicking = true;
        try
        {
            var result = await FilePicker.Default.PickAsync();
            if (result != null)
            {
                // FullPath may be null on some platforms — fall back to FileName if needed.
                var selectedPath = result.FullPath ?? result.FileName;

                Preferences.Set("DatabaseFilePath", selectedPath);
                // DisplayPath = selectedPath;
                // StateHasChanged();
                NavigationManager.NavigateTo("/"); 
            }
        }
        catch (Exception ex)
        {
            // Display a short error in the footer if picking fails
            // DisplayPath = $"Error: {ex.Message}";
            StateHasChanged();
        }
        finally
        {
            _isPicking = false;
        }
    }
}
